<!DOCTYPE html>
<html>
<head>
<title>Universal Smart TV Remote</title>
<style>
body { font-family: Arial; text-align: center; background:#111; color:white; }
button { padding:12px; margin:3px; font-size:14px; cursor:pointer; }
.pad button { width:50px; }
input { padding:10px; width:60%; margin-top:10px; }
h2,h3 { margin-top:20px; }
#status { margin-bottom: 10px; color: #0f0; }
.container { display:flex; justify-content:center; flex-wrap:wrap; }
</style>
</head>
<body>

<h2>ğŸ“º Universal Smart TV Remote</h2>
<div id="status">TV IP not set</div>

<!-- TV IP input -->
<input id="tvIp" placeholder="Enter TV IP (e.g., 192.168.x.xxx)">
<button onclick="setTVIP()">Set TV IP</button>

<div id="controls" style="display:none; margin-top:20px;">

<!-- POWER / SOURCE -->
<div class="container">
  <button onclick="key(26)">â» Power</button>
  <button onclick="key(223)">ğŸ”Œ Input</button>
  <button onclick="key(176)">â˜€ï¸ Brightness Up</button>
  <button onclick="key(178)">â˜€ï¸ Brightness Down</button>
</div>

<!-- VOLUME -->
<div class="container">
  <button onclick="key(24)">ğŸ”Š Vol+</button>
  <button onclick="key(25)">ğŸ”‰ Vol-</button>
  <button onclick="key(164)">ğŸ”‡ Mute</button>
</div>

<!-- NAVIGATION PAD -->
<div class="pad">
  <br>
  <button onclick="key(19)">â¬†</button><br>
  <button onclick="key(21)">â¬…</button>
  <button onclick="key(66)">OK</button>
  <button onclick="key(22)">â¡</button><br>
  <button onclick="key(20)">â¬‡</button>
</div>

<!-- SYSTEM BUTTONS -->
<div class="container">
  <button onclick="key(3)">ğŸ  Home</button>
  <button onclick="key(4)">â†© Back</button>
  <button onclick="key(82)">â˜° Menu</button>
  <button onclick="key(187)">â© Forward</button>
  <button onclick="key(88)">âª Rewind</button>
</div>

<!-- MEDIA CONTROLS -->
<div class="container">
  <button onclick="key(85)">â¯ Play/Pause</button>
  <button onclick="key(86)">â¹ Stop</button>
  <button onclick="key(87)">â­ Next</button>
  <button onclick="key(88)">â® Previous</button>
</div>

<!-- CHANNEL -->
<div class="container">
  <button onclick="key(166)">ğŸ”¼ CH+</button>
  <button onclick="key(167)">ğŸ”½ CH-</button>
</div>

<!-- APPS -->
<h3>Apps</h3>
<div class="container">
  <button onclick="app('com.google.android.youtube.tv')">YouTube</button>
  <button onclick="app('com.netflix.ninja')">Netflix</button>
  <button onclick="app('com.amazon.avod.thirdpartyclient')">Prime Video</button>
  <button onclick="app('com.hbo.hbonow')">HBO Max</button>
</div>

<!-- KEYBOARD -->
<h3>Keyboard</h3>
<input id="text" placeholder="Type here">
<button onclick="sendText()">Send</button>

</div>

<script>
const API = "https://api-server-2-dkuk.onrender.com";
let TVSet = false;

function setTVIP(){
  const ip = document.getElementById("tvIp").value.trim();
  if(!ip) return alert("Enter TV IP");
  fetch(API + "/set-tv-ip", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({ip})
  }).then(res=>{
    if(res.ok){
      TVSet = true;
      document.getElementById("status").innerText = "TV IP set: " + ip;
      document.getElementById("controls").style.display = "block";
    } else alert("Failed to set TV IP");
  });
}

function key(code){
  if(!TVSet) return alert("Set TV IP first");
  fetch(API + "/key", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({code})
  });
}

function sendText(){
  if(!TVSet) return alert("Set TV IP first");
  const text = document.getElementById("text").value;
  fetch(API + "/text", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({text})
  });
}

function app(pkg){
  if(!TVSet) return alert("Set TV IP first");
  fetch(API + "/app", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({pkg})
  });
}
</script>

</body>
</html>
